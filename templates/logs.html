{% extends "base.html" %}
{% block sidebar %}
<div class="sidebar-wrapper">
<link rel="stylesheet" type="text/css" href="static/css/bootstrap.min.css">
    <div class="logo">
        <a href="http://www.creative-tim.com" class="simple-text" style="text-align:left;">
        <i class="pe-7m-user" style="font-size:30px;padding-left:12px"></i>
            Supervisor
        </a>
    </div>

    <ul class="nav">
        <li>
            <a href="/">
                <i class="pe-7s-graph"></i>
                <p>Dashboard</p>
            </a>
        </li>
        
        <li>
            <a href="/inventory">
                <i class="pe-7s-rocket"></i>
                <p>Inventory</p>
            </a>
        </li>

        <li>
            <a href="/tasks">
                <i class="pe-7s-note2"></i>
                <p>Tasks</p>
            </a>
        </li>
        <li>
            <a href="/">
                <i class="pe-7s-power"></i>
                <p>Log Out</p>
            </a>
        </li>
        
    </ul>
</div>
{% endblock %}

{% block title %}
<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navigation-example-2">
    <span class="sr-only">Toggle navigation</span>
    <span class="icon-bar"></span>
    <span class="icon-bar"></span>
    <span class="icon-bar"></span>
</button>
<a class="navbar-brand" href="#">Logs in current month</a>


{% endblock %}

{% block content %}


<script>

// $(function() {

//   // call the tablesorter plugin
//   $("logs").tablesorter({
//     theme: 'blue',

//     // hidden filter input/selects will resize the columns, so try to minimize the change
//     widthFixed : true,

//     // initialize zebra striping and filter widgets
//     widgets: ["zebra", "filter"],

//     // headers: { 5: { sorter: false, filter: false } },

//     widgetOptions : {

//       // extra css class applied to the table row containing the filters & the inputs within that row
//       filter_cssFilter   : '',

//       // If there are child rows in the table (rows with class name from "cssChildRow" option)
//       // and this option is true and a match is found anywhere in the child row, then it will make that row
//       // visible; default is false
//       filter_childRows   : false,

//       // if true, filters are collapsed initially, but can be revealed by hovering over the grey bar immediately
//       // below the header row. Additionally, tabbing through the document will open the filter row when an input gets focus
//       filter_hideFilters : false,

//       // Set this option to false to make the searches case sensitive
//       filter_ignoreCase  : true,

//       // jQuery selector string of an element used to reset the filters
//       filter_reset : '.reset',

//       // Use the $.tablesorter.storage utility to save the most recent filters
//       filter_saveFilters : true,

//       // Delay in milliseconds before the filter widget starts searching; This option prevents searching for
//       // every character while typing and should make searching large tables faster.
//       filter_searchDelay : 300,

//       // Set this option to true to use the filter to find text from the start of the column
//       // So typing in "a" will find "albert" but not "frank", both have a's; default is false
//       filter_startsWith  : false,

//       // Add select box to 4th column (zero-based index)
//       // each option has an associated function that returns a boolean
//       // function variables:
//       // e = exact text from cell
//       // n = normalized value returned by the column parser
//       // f = search filter input value
//       // i = column index
//       filter_functions : {

//         // Add select menu to this column
//         // set the column value to true, and/or add "filter-select" class name to header
//         // '.Name' : true,

//         // // Exact match only
//         // 1 : function(e, n, f, i, $r, c, data) {
//         //   return e === f;
//         // },

//         // // Add these options to the select dropdown (regex example)
//         // 2 : {
//         //   "A - D" : function(e, n, f, i, $r, c, data) { return /^[A-D]/.test(e); },
//         //   "E - H" : function(e, n, f, i, $r, c, data) { return /^[E-H]/.test(e); },
//         //   "I - L" : function(e, n, f, i, $r, c, data) { return /^[I-L]/.test(e); },
//         //   "M - P" : function(e, n, f, i, $r, c, data) { return /^[M-P]/.test(e); },
//         //   "Q - T" : function(e, n, f, i, $r, c, data) { return /^[Q-T]/.test(e); },
//         //   "U - X" : function(e, n, f, i, $r, c, data) { return /^[U-X]/.test(e); },
//         //   "Y - Z" : function(e, n, f, i, $r, c, data) { return /^[Y-Z]/.test(e); }
//         // },

//         // // Add these options to the select dropdown (numerical comparison example)
//         // // Note that only the normalized (n) value will contain numerical data
//         // // If you use the exact text, you'll need to parse it (parseFloat or parseInt)
//         // 4 : {
//         //   "< $10"      : function(e, n, f, i, $r, c, data) { return n < 10; },
//         //   "$10 - $100" : function(e, n, f, i, $r, c, data) { return n >= 10 && n <=100; },
//         //   "> $100"     : function(e, n, f, i, $r, c, data) { return n > 100; }
//         // }
//       }

//     }

//   });

// });
    
    
    function downloadCSV(csv, filename) {

    var csvFile;
    var downloadLink;

    // CSV file
    csvFile = new Blob([csv], {type: "text/csv"});

    // Download link
    downloadLink = document.createElement("a");

    // File name
    downloadLink.download = filename;

    // Create a link to the file
    downloadLink.href = window.URL.createObjectURL(csvFile);

    // Hide download link
    downloadLink.style.display = "none";

    // Add the link to DOM
    document.body.appendChild(downloadLink);

    // Click download link
    downloadLink.click();
}
    function exportTableToCSV(filename) {
    var csv = [];
    var rows = document.querySelectorAll("table tr");
    
    for (var i = 0; i < rows.length; i++) {
        var row = [], cols = rows[i].querySelectorAll("td,th");
        
        for (var j = 0; j < cols.length; j++) 
            row.push(cols[j].innerText);
        
        csv.push(row.join(","));        
    }

    // Download CSV file
    downloadCSV(csv.join("\n"), filename);
}

$(document).ready(function() { 
    $("#logs").tablesorter({
        // sortList: [[4,1]],
        // showProcessing: true,
        widgets: ["filter"],
//         widgetOptions : {
//       // Use the $.tablesorter.storage utility to save the most recent filters
//       filter_saveFilters : true
//       filter_formatter : {
//         function($cell, indx){
//           return $.tablesorter.filterFormatter.uiDatepicker( $cell, indx, {
//             // add any of the jQuery UI Datepicker options here (http://api.jqueryui.com/datepicker/)
//             // from : '8/1/2013', // starting date
//             // to   : '1/18/2014',  // ending date
//             textFrom: 'from',   // "from" label text
//             textTo: 'to',       // "to" label text
//             changeMonth: true,
//             changeYear : true
//             });
//       }
//   }
//   filter_placeholder : {
//         search : '', // any default search inputs including the datepicker comparison
//         from   : 'Date from...', // datepicker range "from" placeholder
//         to     : 'Date to...'  // datepicker range "to" placeholder
//       }
// }

    }); 
});

// function filtername()
//     {  
//         var rex = new RegExp($('#filtername').val());
//         if(rex =="/all/"){clearFilter()}else{
//             $('.content').hide();
//             $('.content').filter(function() {
//             return rex.test($(this).text());
//             }).show();
//     }
//     }


// function filteritem()
//     {  
//         var rex = new RegExp($('#filteritem').val());
//         if(rex =="/all/"){clearFilter()}else{
//             $('.content').hide();
//             $('.content').filter(function() {
//             return rex.test($(this).text());
//             }).show();
//     }
//     }
    
    
// function clearFilter()
//     {
//         $('.filterText').val('');
//         $('.content').show();
//     }

</script>

<div class="container-fluid">
    <div class="row">
		<div class="col-md-12">
		    <div class="card card-plain">
		       <!--  <div class="header">
		            <h4 class="title">Logs</h4>
		            <p class="category">Movement of Inventory</p>
		        </div> -->
		        <div class="content table-responsive table-full-width" style="margin-top: 20px;">
                        <table id="logs" class="tablesorter">
                        <thead>
                        <tr>
                            <th class="filter-select filter-onlyAvail" data-placeholder="All">Name</th>
                            <th class="filter-select filter-onlyAvail" data-placeholder="All">Item</th>
                            <th>Category</th>
                            <th class="filter-select filter-onlyAvail">In/Out</th>
                            <th>Quantity change</th>
                            <th>Quantity remaining</th>
                            <th>Date-Time (two inputs; range)</th>
                            <th>Location</th>
                            </tr>
                        </thead>
                        <tbody id="myTable">
                        {% for log in logs %}
                            <tr class="content">
                                <td>{{log.name}}</td>
                                <td>{{log.item}}</td>
                                <td>{{log.category}}</td>
                                <td>{{log.action}}</td>
                                <td>{{log.change}}</td>
                                <td>{{log.remaining}}</td>
                                <td>{{log.dateTime}}</td>
                                <td>{{log.location}}</td>
                            </tr>
                        {% endfor %}
                        </tbody>
                    </table>
		        </div>
		    </div>
		</div>
	</div>
        
	<div class="row" style="padding-bottom:30px;">
		<div class="col-xs-12" align="center">
         <ul class="pagination">
            <li><a href="#">1</a></li>
            <li><a href="#">2</a></li>
            <li><a href="#">3</a></li>
            <li><a href="#">4</a></li>
            <li><a href="#">5</a></li>
        </ul> 
			<button onclick="exportTableToCSV('table.csv')" class="btn btn-default btn-block">Export</button>
		</div>


{% endblock %}